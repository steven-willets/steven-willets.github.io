<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="ZAG Homework" />
    <link rel="canonical" href="https://steven-willets.github.io/exercise" />
    <title>Exercise - Steven Willets</title>
    <link href="images/favicon-smile.ico" rel="shortcut icon" type="image/x-icon" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Amatic+SC|Lato|Muli:600,600i">
    <link rel="stylesheet" href="styles/jquery.mobile.structure-1.4.5.min.css" />
	<link rel="stylesheet" href="styles/carousel.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
</head>

<body>

    <div id='carousel-container'>
        <h1 class='carousel-heading'>Happy to Help Stories</h1>
        <p class='carousel-subheading'>Why do our members love being part of OECU? Find out below.</p>
        <div id='carousel-inner'>
            <div id="slide-container">
                <div class="item active">
                    <div class='slide'>
						<img class='slide-image' src='images/james-bacon.png' alt='James Bacon'>
                        <div class='slide-text'>
                            <p class='slide-quote'>
                                I am in the process of getting a car loan and Linda has made things so effortless and enjoyable.
                                Thank you very much for helping me save money.
                            </p>
                            <p class='slide-name'>James Bacon</p>
                            <p class='slide-membership'>Member Since 2012</p>
                        </div>
                    </div>
                </div>
                <div class="item">
                    <div class='slide'>
						<img class='slide-image' src='images/placeholder.png' alt='Placeholder User Image'>
                        <div class='slide-text'>
                            <p class='slide-quote'>
                                You have done everything i want from a bank. Courtesy, prompt, polite, professional
                                most of all you love what you do and it shows.
                            </p>
                            <p class='slide-name'>Augustine Uche</p>
                            <p class='slide-membership'>Member Since 2012</p>
                        </div>
                    </div>
                </div>
            </div>
            <a tabindex="1" id="prev-slide" class="move-slide" href="#prev" aria-label="Previous" role="button">
                <img src='images/arrow.png' alt='Previous'>
                <span class="sr-only">Previous</span>
            </a>
            <a tabindex="1" id="next-slide" class="move-slide" href="#next" aria-label="Next" role="button">
                <img src='images/arrow.png' alt='Next'>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>

	<!-- 
		<script src='scripts/carousel.js'></script> 
		Commented out external file since sometimes .js files get flagged in emails.
	-->
    <script>
        function rotateSlides(direction) {
            var $active = $('.active');
            var $next
            var wrap
            if (direction == 'prev') {
                $next = $active.prev('.item')
                wrap = 'last'
            } else {
                $next = $active.next('.item')
                wrap = 'first'
            }
            if (!$next.length) {
                $next = $('.item:' + wrap)
            }
            $next.addClass(direction)
            $active.addClass(direction)
			//Delay to account for .3s transition in css
            setTimeout(function () {
                $next.addClass('active').removeClass(direction);
                $active.removeClass('active').removeClass(direction);
            }, 300);
        }

        (function () {
			var $item = $('.item');
            $item.each(function(i,e){
                var $next = $(e).next()
                if (!$next.length) {
                    $next = $('.item:first')
                }
                $next.find('.slide:first').clone().appendTo($(e))
            });
        }());

		//Mouse Nav
        $('.move-slide').click(function(e){
            e.preventDefault();
            rotateSlides($(this).attr('href').replace('#', ''))
        });

		//Keyboard Nav
		$(document).keydown(function(e){
			if (e.keyCode == 13 && $('.move-slide').is(":focus")) { // Remove KeyDown
				e.preventDefault();
			}	
        });
        $(document).keyup(function(e){
            if (e.keyCode == 37 || (e.keyCode == 13 && $('#prev-slide').is(":focus"))){ // Left Arrow + Enter
                rotateSlides('prev')
                return false;
            }
            if (e.keyCode == 39 || (e.keyCode == 13 && $('#next-slide').is(":focus"))){ // Right Arrow + Enter
                rotateSlides('next')
                return false;
            }
        });

		//Mobile Nav
		$(document).on("pagecreate",".page-container",function(){
			var $carousel = $('#carousel')
			$carousel.on("swipeleft",function(){
				rotateSlides('next')
			});
			$carousel.on("swiperight",function(){
				rotateSlides('prev')
			});  
		});
    </script>

</body>
</html>